(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(80)},51:function(e,t,a){},65:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),l=(a(51),a(18)),i=a(20),c="/publicaciones",u=r.a.createContext(null),m=a(7),p=a(8),h=a(10),d=a(9),f=a(11),b=r.a.createContext(null),E=function(e){return function(t){return r.a.createElement(b.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},g=b,v=a(23),O=a.n(v),C=(a(54),a(56),a(81),{apiKey:"AIzaSyCeRd2CN1CIt1vmnqK3GW-uhZnzDYvZrX4",authDomain:"new-poua.firebaseapp.com",databaseURL:"https://new-poua.firebaseio.com",projectId:"new-poua",storageBucket:"new-poua.appspot.com",messagingSenderId:"511225654721"}),j=function e(){var t=this;Object(m.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.post=function(e){return t.db.ref("posts/".concat(e))},this.posts=function(){return t.db.ref("posts")},this.storageRef=function(e){return t.storage.ref(e)},O.a.initializeApp(C),this.auth=O.a.auth(),this.db=O.a.database(),this.storage=O.a.storage(),this.serverValue=O.a.database.ServerValue},w=function(e){var t=function(t){function a(e){var t;return Object(m.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={authUser:null},t}return Object(f.a)(a,t),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(u.Provider,{value:this.state.authUser},r.a.createElement(e,this.props))}}]),a}(r.a.Component);return E(t)},S=a(19),y=function(e){return function(t){var a=function(a){function n(){return Object(m.a)(this,n),Object(h.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(f.a)(n,a),Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/iniciar")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return r.a.createElement(u.Consumer,null,function(n){return e(n)?r.a.createElement(t,a.props):null})}}]),n}(r.a.Component);return Object(S.a)(i.e,E)(a)}},k=a(14),N=a(82),P=E(function(e){var t=e.firebase;return r.a.createElement(N.a,{className:"btnSignOut",type:"button",onClick:t.doSignOut},r.a.createElement("i",{class:"fas fa-sign-out-alt"})," CERRAR SESI\xd3N")}),x=(a(65),a(83)),U=a(84),I=a(85),T=a(86),A=a(87),R=a(88),M=a(89),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).toggleNavbar=a.toggleNavbar.bind(Object(k.a)(a)),a.state={collapsed:!0},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,{light:!0},r.a.createElement(U.a,{className:"mr-auto"},r.a.createElement("img",{className:"img-logo",alt:"logo",src:"https://github.com/ItzelMB/GDL002-social-network/blob/master/public/src/imagenes/logo-poua-app.png?raw=true"})),r.a.createElement(I.a,{onClick:this.toggleNavbar,className:"mr-2"}),r.a.createElement(T.a,{isOpen:!this.state.collapsed,navbar:!0},r.a.createElement(A.a,{navbar:!0},r.a.createElement(R.a,null,r.a.createElement("li",null),r.a.createElement(M.a,null,r.a.createElement(l.b,{className:"link-nav",to:c},"IR A PUBLICACIONES"))),r.a.createElement(R.a,null,r.a.createElement(M.a,null,r.a.createElement(P,null)))))))}}]),t}(r.a.Component),D=function(){return r.a.createElement("div",null,r.a.createElement(u.Consumer,null,function(e){return e?r.a.createElement(L,null):null}))},W=a(22),V=a(12),B=(a(73),a(74),{username:"",email:"",passwordOne:"",passwordTwo:"",error:null}),z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,o=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(r,o).then(function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:r})}).then(function(){a.setState(Object(V.a)({},B)),a.props.history.push(c)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(W.a)({},e.target.name,e.target.value))},a.state=Object(V.a)({},B),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,o=e.passwordTwo,s=e.error,l=n!==o||""===n||""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{className:"inputSignUp",name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Nombre completo",autoComplete:"off"}),r.a.createElement("div",null,r.a.createElement("input",{className:"inputSignUp",name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Correo electr\xf3nico",autoComplete:"off"})),r.a.createElement("input",{className:"inputSignUp",name:"passwordOne",value:n,onChange:this.onChange,type:"password",placeholder:"Contrase\xf1a",autoComplete:"off"}),r.a.createElement("div",null,r.a.createElement("input",{className:"inputSignUp",name:"passwordTwo",value:o,onChange:this.onChange,type:"password",placeholder:"Confirmar contrase\xf1a",autoComplete:"off"})),r.a.createElement(N.a,{className:"btnSignUp",color:"warning",disabled:l,type:"submit"},"REGISTRARSE"),s&&r.a.createElement("p",null,s.message))}}]),t}(n.Component),G=function(){return r.a.createElement("p",{className:"signUpParr"},"\xbfNo tienes cuenta? ",r.a.createElement(l.b,{to:"/registro"},"Aqu\xed puedes crearla"))},q=Object(S.a)(i.e,E)(z),J=function(){return r.a.createElement("div",null,r.a.createElement("img",{className:"bannerInicio",alt:"banner-inicio",src:"https://github.com/ItzelMB/GDL002-social-network/blob/master/public/src/imagenes/inicio-banner.png?raw=true"}),r.a.createElement(q,null))},K={email:"",password:"",error:null},Z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then(function(){a.setState(Object(V.a)({},K)),a.props.history.push(c)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(W.a)({},e.target.name,e.target.value))},a.state=Object(V.a)({},K),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,o=""===a||""===t;return r.a.createElement("form",{className:"formLogin",onSubmit:this.onSubmit},r.a.createElement("div",null,r.a.createElement("input",{className:"inputLogin",name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Correo electr\xf3nico",autoComplete:"off"})),r.a.createElement("div",null,r.a.createElement("input",{className:"inputLogin",name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Contrase\xf1a",autoComplete:"off"})),r.a.createElement(N.a,{color:"warning",className:"btnLogin",disabled:o,type:"submit"},"INICIAR SESI\xd3N"),n&&r.a.createElement("p",null,n.message))}}]),t}(n.Component),F=Object(S.a)(i.e,E)(Z),X=function(){return r.a.createElement("div",null,r.a.createElement("img",{className:"bannerInicio",alt:"banner-inicio",src:"https://github.com/ItzelMB/GDL002-social-network/blob/master/public/src/imagenes/inicio-banner.png?raw=true"}),r.a.createElement(F,null),r.a.createElement(G,null))},Y=function(){return r.a.createElement("div",null,r.a.createElement(X,null))},$=a(45),_=(a(75),a(76),function(){return r.a.createElement("footer",null,r.a.createElement("p",{className:"footerParr"},"Created by Perla, Jess & Itinna. 2019"))}),H=(a(77),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleLike=function(){var e=a.state.post;e.likes=e.likes+1,a.setState({post:e}),a.props.firebase.post(a.state.post.uid).set(Object(V.a)({},a.state.post,{likes:a.state.post.likes}))},a.state={post:a.props.post},console.log(a.props.firebase),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("container",{className:"container"},r.a.createElement("button",{className:"like",onClick:this.handleLike},r.a.createElement("i",{class:"fas fa-heart"})),r.a.createElement("p",{className:"counter"},this.state.post.likes))}}]),t}(n.Component)),Q=E(H),ee=(a(78),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("progress",{value:this.props.uploadValue}),r.a.createElement("label",{for:"uploadPhoto"},r.a.createElement("i",{class:"fas fa-file-upload"})),r.a.createElement("input",{type:"file",id:"uploadPhoto",onChange:this.props.onUpload}))}}]),t}(n.Component)),te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onChangeText=function(e){a.setState({text:e.target.value})},a.onCreatePosts=function(e,t){var n,r=Object(k.a)(a);console.log("photo url"+r.state.photo),a.props.firebase.users().child(t.uid).child("username").once("value").then(function(e){n=e.val()}).then(function(){r.props.firebase.posts().push({text:r.state.text,userId:t.uid,username:n,time:r.props.firebase.serverValue.TIMESTAMP,photoUrl:r.state.photo}),r.setState({text:""}),e.persist()})},a.onRemovePost=function(e){a.props.firebase.post(e).remove()},a.onEditPost=function(e,t){e.uid;var n=Object($.a)(e,["uid"]);a.props.firebase.post(e.uid).set(Object(V.a)({},n,{text:t,editTime:a.props.firebase.serverValue.TIMESTAMP}))},a.handlePhotoUpload=function(e){var t=e.target.files[0],n=a.props.firebase.storageRef("/photos/".concat(t.name)).put(t),r=Object(k.a)(a);n.on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;r.setState({uploadValue:t})},function(e){console.log(e.message)},function(){n.snapshot.ref.getDownloadURL().then(function(e){console.log(e),r.setState({uploadValue:100,photo:e})})})},a.state={text:"",loading:!1,posts:[],photo:null,uploadValue:0,likes:0},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.posts().on("value",function(t){var a=t.val();if(a){var n=Object.keys(a).map(function(e){return Object(V.a)({},a[e],{uid:e})});e.setState({posts:n.reverse(),loading:!1})}else e.setState({posts:null,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.posts().off()}},{key:"render",value:function(){var e=this,t=this.state,a=t.text,n=t.posts,o=t.loading,s=""===a;return r.a.createElement(u.Consumer,null,function(t){return r.a.createElement("div",null,r.a.createElement("form",{className:"formPost",onSubmit:function(a){return e.onCreatePosts(a,t)}},r.a.createElement("h4",null,"Poua una historia"),r.a.createElement("textarea",{className:"createPostArea",type:"text",value:a,onChange:e.onChangeText,cols:"90",rows:"6",placeholder:"Comienza a escribir aqu\xed tu historia..."}),r.a.createElement("div",null,r.a.createElement(ee,{onUpload:e.handlePhotoUpload,uploadValue:e.state.uploadValue}),r.a.createElement(N.a,{className:"btnPublish",color:"warning",type:"submit",disabled:s},"PUBLICAR"))),o&&r.a.createElement("div",null,"Cargando publicaciones ..."),n?r.a.createElement("div",null,r.a.createElement(re,{authUser:t,posts:n,onRemovePost:e.onRemovePost,onEditPost:e.onEditPost})):r.a.createElement("div",null,"A\xfan no hay publicaciones ..."))})}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onToggleEditMode=function(){a.setState(function(e){return{editMode:!e.editMode,editText:a.props.post.text}})},a.onChangeEditText=function(e){a.setState({editText:e.target.value})},a.onSaveEditText=function(){a.props.onEditPost(a.props.post,a.state.editText),a.setState({editMode:!1})},a.state={editMode:!1,editText:a.props.post.text},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authUser,a=e.post,n=e.onRemovePost,o=this.state,s=o.editMode,l=o.editText;return console.log(a),r.a.createElement("li",{className:"post"},t.uid===a.userId&&r.a.createElement("span",{className:"btnsContainer"},s?r.a.createElement("span",null,r.a.createElement(N.a,{color:"warning",onClick:this.onSaveEditText},"Guardar"),r.a.createElement(N.a,{color:"warning",onClick:this.onToggleEditMode},"Cancelar")):r.a.createElement(N.a,{color:"warning",onClick:this.onToggleEditMode},r.a.createElement("i",{class:"fas fa-edit"})),!s&&r.a.createElement(N.a,{color:"warning",type:"button",onClick:function(){return n(a.uid)}},r.a.createElement("i",{class:"fas fa-trash-alt"}))),s?r.a.createElement("textarea",{type:"text",value:l,onChange:this.onChangeEditText}):r.a.createElement("span",null,r.a.createElement("strong",null,a.username+" cuenta que..."),r.a.createElement("div",{className:"textPost"},a.text,a.editTime&&r.a.createElement("span",null,r.a.createElement("strong",null," (Editado)")),r.a.createElement("div",null,r.a.createElement("img",{src:a.photoUrl,alt:"",className:"postImage"})))),r.a.createElement(Q,{firebase:this.props.firebase,post:a}))}}]),t}(n.Component),ne=E(te),re=function(e){var t=e.authUser,a=e.posts,n=e.onRemovePost,o=e.onEditPost;return r.a.createElement("ul",null,a.map(function(e){return r.a.createElement(ae,{authUser:t,key:e.uid,post:e,onRemovePost:n,onEditPost:o})}))},oe=Object(S.a)(y(function(e){return!!e}))(function(){return r.a.createElement("div",null,r.a.createElement(ne,null),r.a.createElement(_,null))}),se=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Account"))},le=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1,users:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",function(t){var a=t.val(),n=Object.keys(a).map(function(e){return Object(V.a)({},a[e],{uid:e})});e.setState({users:n,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.loading;return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),a&&r.a.createElement("div",null,"Loading ..."),r.a.createElement(ie,{users:t}))}}]),t}(n.Component),ie=function(e){var t=e.users;return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("span",null,r.a.createElement("strong",null,"ID: ")," ",e.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"Correo electr\xf3nico: ")," ",e.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Usuario: ")," ",e.username))}))},ce=E(le),ue=w(function(){return r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement(i.a,{exact:!0,path:"/",component:Y}),r.a.createElement(i.a,{path:"/registro",component:J}),r.a.createElement(i.a,{path:"/iniciar",component:X}),r.a.createElement(i.a,{path:c,component:oe}),r.a.createElement(i.a,{path:"/cuenta",component:se}),r.a.createElement(i.a,{path:"/admin",component:ce})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(79);s.a.render(r.a.createElement(g.Provider,{value:new j},r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.7582ec1a.chunk.js.map